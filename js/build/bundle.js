/*!
 * velox - v0.3.3 - https://github.com/jpillora/velox
 * Jaime Pillora <dev@jpillora.com> - MIT Copyright 2017
 */
!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function i(t){if(r.online=navigator.onLine,r.online)for(var e=0;e<o.length;e++)o[e].retrying&&o[e].retry()}n(2);var r=n(3),o=r.connections;window.addEventListener("online",i),window.addEventListener("offline",i),window.velox=r,t.exports=r},function(t,e){!function(t){"use strict";function e(t,e,i,r,o){this._internal=new n(t,e,i,r,o)}function n(t,e,n,i,r){this.onStartCallback=e,this.onProgressCallback=n,this.onFinishCallback=i,this.thisArg=r,this.xhr=t,this.state=0,this.charOffset=0,this.offset=0,this.url="",this.withCredentials=!1,this.timeout=0}function i(){this._data={}}function r(){this._listeners=new i}function o(t){l((function(){throw t}),0)}function s(t){this.type=t,this.target=void 0}function a(t,e){s.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}function h(t,e){r.call(this),this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url="",this.readyState=g,this.withCredentials=!1,this._internal=new u(this,t,e)}function u(t,n,i){this.url=n.toString(),this.readyState=g,this.withCredentials=y&&null!=i&&Boolean(i.withCredentials),this.es=t,this.initialRetry=O(1e3,0),this.heartbeatTimeout=O(45e3,0),this.lastEventId="",this.retry=this.initialRetry,this.wasActivity=!1;var r=new(null!=i&&null!=i.Transport?i.Transport:m);this.transport=new e(r,this.onStart,this.onProgress,this.onFinish,this),this.timeout=0,this.currentState=w,this.dataBuffer=[],this.lastEventIdBuffer="",this.eventTypeBuffer="",this.state=S,this.fieldStart=0,this.valueStart=0,this.es.url=this.url,this.es.readyState=this.readyState,this.es.withCredentials=this.withCredentials,this.onTimeout()}function c(){this.CONNECTING=g,this.OPEN=b,this.CLOSED=E}var l=t.setTimeout,f=t.clearTimeout,p=function(){};e.prototype.open=function(t,e){this._internal.open(t,e)},e.prototype.cancel=function(){this._internal.cancel()},n.prototype.onStart=function(){if(1===this.state){this.state=2;var t=0,e="",n=void 0;if("contentType"in this.xhr)t=200,e="OK",n=this.xhr.contentType;else try{t=this.xhr.status,e=this.xhr.statusText,n=this.xhr.getResponseHeader("Content-Type")}catch(i){t=0,e="",n=void 0}null==n&&(n=""),this.onStartCallback.call(this.thisArg,t,e,n)}},n.prototype.onProgress=function(){if(this.onStart(),2===this.state||3===this.state){this.state=3;var t="";try{t=this.xhr.responseText}catch(t){}for(var e=this.charOffset,n=t.length,i=this.offset;i<n;i+=1){var r=t.charCodeAt(i);r!=="\n".charCodeAt(0)&&r!=="\r".charCodeAt(0)||(this.charOffset=i+1)}this.offset=n;var o=t.slice(e,this.charOffset);this.onProgressCallback.call(this.thisArg,o)}},n.prototype.onFinish=function(){this.onProgress(),3===this.state&&(this.state=4,0!==this.timeout&&(f(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg))},n.prototype.onReadyStateChange=function(){null!=this.xhr&&(4===this.xhr.readyState?(this.xhr.status,this.onFinish()):3===this.xhr.readyState?this.onProgress():this.xhr.readyState)},n.prototype.onTimeout2=function(){this.timeout=0;var e=/^data\:([^,]*?)(base64)?,([\S]*)$/.exec(this.url),n=e[1],i="base64"===e[2]?t.atob(e[3]):decodeURIComponent(e[3]);1===this.state&&(this.state=2,this.onStartCallback.call(this.thisArg,200,"OK",n)),2!==this.state&&3!==this.state||(this.state=3,this.onProgressCallback.call(this.thisArg,i)),3===this.state&&(this.state=4,this.onFinishCallback.call(this.thisArg))},n.prototype.onTimeout1=function(){this.timeout=0,this.open(this.url,this.withCredentials)},n.prototype.onTimeout0=function(){var t=this;this.timeout=l((function(){t.onTimeout0()}),500),3===this.xhr.readyState&&this.onProgress()},n.prototype.handleEvent=function(t){"load"===t.type?this.onFinish():"error"===t.type?this.onFinish():"abort"===t.type?this.onFinish():"progress"===t.type?this.onProgress():"readystatechange"===t.type&&this.onReadyStateChange()},n.prototype.open=function(e,n){this.cancel(),this.url=e,this.withCredentials=n,this.state=1,this.charOffset=0,this.offset=0;var i=this;if(null==/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(e))if((!("ontimeout"in this.xhr)||"sendAsBinary"in this.xhr||"mozAnon"in this.xhr)&&null!=t.document&&null!=t.document.readyState&&"complete"!==t.document.readyState)this.timeout=l((function(){i.onTimeout1()}),4);else{this.xhr.onload=function(t){i.handleEvent({type:"load"})},this.xhr.onerror=function(){i.handleEvent({type:"error"})},this.xhr.onabort=function(){i.handleEvent({type:"abort"})},this.xhr.onprogress=function(){i.handleEvent({type:"progress"})},this.xhr.onreadystatechange=function(){i.handleEvent({type:"readystatechange"})},this.xhr.open("GET",e,!0),this.xhr.withCredentials=n,this.xhr.responseType="text","setRequestHeader"in this.xhr&&this.xhr.setRequestHeader("Accept","text/event-stream");try{this.xhr.send(void 0)}catch(t){throw t}"readyState"in this.xhr&&null!=t.opera&&(this.timeout=l((function(){i.onTimeout0()}),0))}else this.timeout=l((function(){i.onTimeout2()}),0)},n.prototype.cancel=function(){0!==this.state&&4!==this.state&&(this.state=4,this.xhr.onload=p,this.xhr.onerror=p,this.xhr.onabort=p,this.xhr.onprogress=p,this.xhr.onreadystatechange=p,this.xhr.abort(),0!==this.timeout&&(f(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg)),this.state=0},i.prototype.get=function(t){return this._data[t+"~"]},i.prototype.set=function(t,e){this._data[t+"~"]=e},i.prototype.delete=function(t){delete this._data[t+"~"]},r.prototype.dispatchEvent=function(t){t.target=this;var e=t.type.toString(),n=this._listeners.get(e);if(null!=n)for(var i=n.length,r=void 0,s=0;s<i;s+=1){r=n[s];try{"function"==typeof r.handleEvent?r.handleEvent(t):r.call(this,t)}catch(t){o(t)}}},r.prototype.addEventListener=function(t,e){t=t.toString();var n=this._listeners,i=n.get(t);null==i&&(i=[],n.set(t,i));for(var r=i.length;r>=0;r-=1)if(i[r]===e)return;i.push(e)},r.prototype.removeEventListener=function(t,e){t=t.toString();var n=this._listeners,i=n.get(t);if(null!=i){for(var r=i.length,o=[],s=0;s<r;s+=1)i[s]!==e&&o.push(i[s]);0===o.length?n.delete(t):n.set(t,o)}},a.prototype=s.prototype;var d=t.XMLHttpRequest,v=t.XDomainRequest,y=null!=d&&null!=(new d).withCredentials,m=y||null!=d&&null==v?d:v,w=-1,g=0,b=1,E=2,S=4,A=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,O=function(t,e){var n=t;return n!=n&&(n=e),n<1e3?1e3:n>18e6?18e6:n},T=function(t,e,n){try{"function"==typeof e&&e.call(t,n)}catch(t){o(t)}};u.prototype.onStart=function(t,e,n){if(this.currentState===g)if(null==n&&(n=""),200===t&&A.test(n)){this.currentState=b,this.wasActivity=!0,this.retry=this.initialRetry,this.readyState=b,this.es.readyState=b;var i=new s("open");this.es.dispatchEvent(i),T(this.es,this.es.onopen,i)}else if(0!==t){var r;r=200!==t?"EventSource's response has a status "+t+" "+e.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+n.replace(/\s+/g," ")+". Aborting the connection.",o(new Error(r)),this.close();i=new s("error");this.es.dispatchEvent(i),T(this.es,this.es.onerror,i)}},u.prototype.onProgress=function(t){if(this.currentState===b){var e=t.length;0!==e&&(this.wasActivity=!0);for(var n=0;n<e;n+=1){var i=t.charCodeAt(n);if(3===this.state&&i==="\n".charCodeAt(0))this.state=S;else if(3===this.state&&(this.state=S),i==="\r".charCodeAt(0)||i==="\n".charCodeAt(0)){if(this.state!==S){5===this.state&&(this.valueStart=n+1);var r=t.slice(this.fieldStart,this.valueStart-1),o=t.slice(this.valueStart+(this.valueStart<n&&t.charCodeAt(this.valueStart)===" ".charCodeAt(0)?1:0),n);if("data"===r)this.dataBuffer.push(o);else if("id"===r)this.lastEventIdBuffer=o;else if("event"===r)this.eventTypeBuffer=o;else if("retry"===r)this.initialRetry=O(Number(o),this.initialRetry),this.retry=this.initialRetry;else if("heartbeatTimeout"===r&&(this.heartbeatTimeout=O(Number(o),this.heartbeatTimeout),0!==this.timeout)){f(this.timeout);var s=this;this.timeout=l((function(){s.onTimeout()}),this.heartbeatTimeout)}}if(this.state===S){if(0!==this.dataBuffer.length){this.lastEventId=this.lastEventIdBuffer,""===this.eventTypeBuffer&&(this.eventTypeBuffer="message");var h=new a(this.eventTypeBuffer,{data:this.dataBuffer.join("\n"),lastEventId:this.lastEventIdBuffer});if(this.es.dispatchEvent(h),"message"===this.eventTypeBuffer&&T(this.es,this.es.onmessage,h),this.currentState===E)return}this.dataBuffer.length=0,this.eventTypeBuffer=""}this.state=i==="\r".charCodeAt(0)?3:S}else this.state===S&&(this.fieldStart=n,this.state=5),5===this.state?i===":".charCodeAt(0)&&(this.valueStart=n+1,this.state=6):6===this.state&&(this.state=7)}}},u.prototype.onFinish=function(){if(this.currentState===b||this.currentState===g){this.currentState=w,0!==this.timeout&&(f(this.timeout),this.timeout=0),this.retry>16*this.initialRetry&&(this.retry=16*this.initialRetry),this.retry>18e6&&(this.retry=18e6);var t=this;this.timeout=l((function(){t.onTimeout()}),this.retry),this.retry=2*this.retry+1,this.readyState=g,this.es.readyState=g;var e=new s("error");this.es.dispatchEvent(e),T(this.es,this.es.onerror,e)}},u.prototype.onTimeout=function(){if(this.timeout=0,this.currentState===w){this.wasActivity=!1;var t=this;this.timeout=l((function(){t.onTimeout()}),this.heartbeatTimeout),this.currentState=g,this.dataBuffer.length=0,this.eventTypeBuffer="",this.lastEventIdBuffer=this.lastEventId,this.fieldStart=0,this.valueStart=0,this.state=S;var e=this.url.slice(0,5);e="data:"!==e&&"blob:"!==e?this.url+(-1===this.url.indexOf("?",0)?"?":"&")+"lastEventId="+encodeURIComponent(this.lastEventId)+"&r="+(Math.random()+1).toString().slice(2):this.url;try{this.transport.open(e,this.withCredentials)}catch(t){throw this.close(),t}}else if(this.wasActivity){this.wasActivity=!1;t=this;this.timeout=l((function(){t.onTimeout()}),this.heartbeatTimeout)}else o(new Error("No activity within "+this.heartbeatTimeout+" milliseconds. Reconnecting.")),this.transport.cancel()},u.prototype.close=function(){this.currentState=E,this.transport.cancel(),0!==this.timeout&&(f(this.timeout),this.timeout=0),this.readyState=E,this.es.readyState=E},c.prototype=r.prototype,h.prototype=new c,h.prototype.close=function(){this._internal.close()},c.call(h),y&&(h.prototype.withCredentials=void 0),null!=m&&(null==t.EventSource||y&&!(null!=t.EventSource&&"withCredentials"in t.EventSource.prototype))&&(t.NativeEventSource=t.EventSource,t.EventSource=h)}("undefined"!=typeof window?window:this)},function(t,e,n){"use strict";(function(e){var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(9),s=n(4),a=n(5),h=n(8),u="object"===("undefined"==typeof window?"undefined":r(window)),c="object"===(void 0===e?"undefined":r(e)),l=Symbol("WS"),f=Symbol("SSE"),p=u?window:c?e:null;if(!p)throw"where am i...";var d=["message","error","open","close"],v=[],y=function(){function t(e,n,i,o){switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){case l:if(!p.WebSocket)throw"This client does not support WebSockets";this.ws=!0;break;case f:this.sse=!0;break;default:throw"Type must be velox.WS or velox.SSE"}if(!i||"object"!==(void 0===i?"undefined":r(i)))throw"Invalid object";this.obj=i,this.opts=o||{},this.backoff=new h(this.opts.backoff||{min:100,max:2e4}),void 0===this.opts.retry&&(this.opts.retry=!0),n||(n="/velox"),this.url=n,this.id="",this.version=0,this.onupdate=function(){},this.onerror=function(){},this.onconnect=function(){},this.ondisconnect=function(){},this.onchange=function(){},this.connected=!1,this.connect()}return i(t,[{key:"connect",value:function(){var t=this;-1===v.indexOf(this)&&v.push(this),"Promise"in p&&(this.waited=null,this.waiter=new Promise((function(e){t.waited=e}))),this.retrying=!0,this.retry()}},{key:"retry",value:function(){if(clearTimeout(this.retry.t),this.conn&&this.cleanup(),this.retrying){this.delay||(this.delay=100);var t=this.url;p.location&&!/^(ws|http)s?:/.test(t)&&(t=p.location.protocol+"//"+p.location.host+t),this.ws&&(t=t.replace(/^http/,"ws"));var e=a(t,!0);this.version&&(e.query.v=this.version),this.id&&(e.query.id=this.id),this.opts.username&&(e.username=this.opts.username),this.opts.password&&(e.password=this.opts.password),t=e.toString(),this.ws?this.conn=new p.WebSocket(t):this.conn=new p.EventSource(t,{withCredentials:!0});var n=this;d.forEach((function(t){n.conn["on"+t]=n["conn"+t].bind(n)})),this.sleepCheck.last=null,this.sleepCheck()}}},{key:"disconnect",value:function(){var t=v.indexOf(this);t>=0&&v.splice(t,1),this.retrying=!1,this.cleanup(),this.waiter&&this.waited()}},{key:"cleanup",value:function(){if(clearTimeout(this.pingout.t),this.conn){var t=this.conn;this.conn=null,d.forEach((function(e){t["on"+e]=null})),t&&t.readyState!==t.CLOSED&&t.close(),this.statusCheck()}}},{key:"send",value:function(t){var e=this.conn;if(e&&e instanceof p.WebSocket&&e.readyState===e.OPEN)return e.send(t)}},{key:"pingin",value:function(){clearTimeout(this.pingin.t),this.pingin.t=setTimeout(this.retry.bind(this),45e3)}},{key:"pingout",value:function(){this.send("ping"),clearTimeout(this.pingout.t),this.pingout.t=setTimeout(this.pingout.bind(this),25e3)}},{key:"sleepCheck",value:function(){var t=this.sleepCheck;clearInterval(t.t);var e=Date.now(),n=t.last&&e-t.last>3e4;t.last=e,t.t=setTimeout(this.sleepCheck.bind(this),5e3),n&&this.retry()}},{key:"statusCheck",value:function(t){var e=!!this.connected,n=!(!this.conn||this.conn.readyState!==this.conn.OPEN);e!==n&&(this.connected=n,this.onchange(this.connected),this.connected?this.onconnect():this.ondisconnect())}},{key:"connmessage",value:function(t){var e=void 0;try{e=JSON.parse(t.data)}catch(t){return void this.onerror(t)}return e.ping?void this.pingin():(e.id&&(this.id=e.id),e.body&&this.obj?(e.delta?o.applyPatch(this.obj,e.body):s(this.obj,e.body),"function"==typeof this.obj.$apply&&this.obj.$apply(),this.onupdate(this.obj),this.version=e.version,void this.backoff.reset()):void this.onerror("null objects"))}},{key:"connopen",value:function(){this.statusCheck(),this.pingin(),this.pingout()}},{key:"connclose",value:function(){if(this.statusCheck(),this.opts.retry){var t=this.backoff.duration();this.retrying&&m.online&&(this.retry.t=setTimeout(this.connect.bind(this),t))}else this.disconnect()}},{key:"connerror",value:function(t){this.conn&&this.conn instanceof p.EventSource?(this.conn.close(),this.connclose()):(this.statusCheck(),this.onerror(t))}},{key:"wait",value:function(){return this.waiter}}]),t}(),m=function t(e,n,i){return t.DEFAULT!==f&&p.WebSocket?t.ws(e,n,i):t.sse(e,n,i)};m.WS=l,m.ws=function(t,e,n){return new y(l,t,e,n)},m.SSE=m.DEFAULT=f,m.sse=function(t,e,n){return new y(f,t,e,n)},m.proto="v2",m.connections=v,m.online=!0,t.exports=m}).call(this,n(0))},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function t(e,n){if(!e||"object"!==(void 0===e?"undefined":i(e))||!n||"object"!==(void 0===n?"undefined":i(n)))return n;var r;if(e instanceof Array&&n instanceof Array)for(;e.length>n.length;)e.pop();else for(r in e)"$"===r[0]||r in n||delete e[r];for(r in n)e[r]=t(e[r],n[r]);return e}},function(t,e,n){"use strict";(function(e){function i(t){return(t||"").toString().replace(l,"")}function r(t){var n,i=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},r={},o=typeof(t=t||i);if("blob:"===t.protocol)r=new s(unescape(t.pathname),{});else if("string"===o)for(n in r=new s(t,{}),p)delete r[n];else if("object"===o){for(n in t)n in p||(r[n]=t[n]);void 0===r.slashes&&(r.slashes=u.test(t.href))}return r}function o(t){t=i(t);var e=c.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function s(t,e,n){if(t=i(t),!(this instanceof s))return new s(t,e,n);var u,c,l,p,d,v,y=f.slice(),m=typeof e,w=this,g=0;for("object"!==m&&"string"!==m&&(n=e,e=null),n&&"function"!=typeof n&&(n=h.parse),e=r(e),u=!(c=o(t||"")).protocol&&!c.slashes,w.slashes=c.slashes||u&&e.slashes,w.protocol=c.protocol||e.protocol||"",t=c.rest,c.slashes||(y[3]=[/(.*)/,"pathname"]);g<y.length;g++)"function"!=typeof(p=y[g])?(l=p[0],v=p[1],l!=l?w[v]=t:"string"==typeof l?~(d=t.indexOf(l))&&("number"==typeof p[2]?(w[v]=t.slice(0,d),t=t.slice(d+p[2])):(w[v]=t.slice(d),t=t.slice(0,d))):(d=l.exec(t))&&(w[v]=d[1],t=t.slice(0,d.index)),w[v]=w[v]||u&&p[3]&&e[v]||"",p[4]&&(w[v]=w[v].toLowerCase())):t=p(t);n&&(w.query=n(w.query)),u&&e.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==e.pathname)&&(w.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),i=n.length,r=n[i-1],o=!1,s=0;i--;)"."===n[i]?n.splice(i,1):".."===n[i]?(n.splice(i,1),s++):s&&(0===i&&(o=!0),n.splice(i,1),s--);return o&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(w.pathname,e.pathname)),a(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(p=w.auth.split(":"),w.username=p[0]||"",w.password=p[1]||""),w.origin=w.protocol&&w.host&&"file:"!==w.protocol?w.protocol+"//"+w.host:"null",w.href=w.toString()}var a=n(6),h=n(7),u=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,l=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+"),f=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};s.prototype={set:function(t,e,n){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||h.parse)(e)),i[t]=e;break;case"port":i[t]=e,a(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,/:\d+$/.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(e){var r="pathname"===t?"/":"#";i[t]=e.charAt(0)!==r?r+e:e}else i[t]=e;break;default:i[t]=e}for(var o=0;o<f.length;o++){var s=f[o];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=h.stringify);var e,n=this,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var r=i+(n.slashes?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.host+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(r+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(r+=n.hash),r}},s.extractProtocol=o,s.location=r,s.trimLeft=i,s.qs=h,t.exports=s}).call(this,n(0))},function(t,e,n){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,n){"use strict";function i(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}var r=Object.prototype.hasOwnProperty;e.stringify=function(t,e){e=e||"";var n,i,o=[];for(i in"string"!=typeof e&&(e="?"),t)if(r.call(t,i)){if((n=t[i])||null!=n&&!isNaN(n)||(n=""),i=encodeURIComponent(i),n=encodeURIComponent(n),null===i||null===n)continue;o.push(i+"="+n)}return o.length?e+o.join("&"):""},e.parse=function(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,r={};e=n.exec(t);){var o=i(e[1]),s=i(e[2]);null===o||null===s||o in r||(r[o]=s)}return r}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0}},function(t,e,n){"use strict";function i(t,e){return x.call(t,e)}function r(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);e=[];for(var r in t)i(t,r)&&e.push(r);return e}function o(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function s(t){for(var e,n=0,i=t.length;n<i;){if(!((e=t.charCodeAt(n))>=48&&e<=57))return!1;n++}return!0}function a(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function h(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function u(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(u(t[e]))return!0}else if("object"==typeof t){var i=r(t),o=i.length;for(e=0;e<o;e++)if(u(t[i[e]]))return!0}return!1}function c(t,e){var n=[t];for(var i in e){var r="object"==typeof e[i]?JSON.stringify(e[i],null,2):e[i];void 0!==r&&n.push(i+": "+r)}return n.join("\n")}function l(t,e){if(""==e)return t;var n={op:"_get",path:e};return f(t,n),n.value}function f(t,e,n,i,r,a){if(void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===a&&(a=0),n&&("function"==typeof n?n(e,0,t,e.path):v(e,0)),""===e.path){var u={newDocument:t};if("add"===e.op)return u.newDocument=e.value,u;if("replace"===e.op)return u.newDocument=e.value,u.removed=t,u;if("move"===e.op||"copy"===e.op)return u.newDocument=l(t,e.from),"move"===e.op&&(u.removed=t),u;if("test"===e.op){if(u.test=m(t,e.value),!1===u.test)throw new C("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return u.newDocument=t,u}if("remove"===e.op)return u.removed=t,u.newDocument=null,u;if("_get"===e.op)return e.value=t,u;if(n)throw new C("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,t);return u}i||(t=o(t));var c=(e.path||"").split("/"),f=t,p=1,d=c.length,y=void 0,w=void 0,g=void 0;for(g="function"==typeof n?n:v;;){if(w=c[p],r&&"__proto__"==w)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===y&&(void 0===f[w]?y=c.slice(0,p).join("/"):p==d-1&&(y=e.path),void 0!==y&&g(e,0,t,y)),p++,Array.isArray(f)){if("-"===w)w=f.length;else{if(n&&!s(w))throw new C("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,t);s(w)&&(w=~~w)}if(p>=d){if(n&&"add"===e.op&&w>f.length)throw new C("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,t);if(!1===(u=N[e.op].call(e,f,w,t)).test)throw new C("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return u}}else if(w&&-1!=w.indexOf("~")&&(w=h(w)),p>=d){if(!1===(u=k[e.op].call(e,f,w,t)).test)throw new C("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return u}f=f[w]}}function p(t,e,n,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),n&&!Array.isArray(e))throw new C("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(t=o(t));for(var s=new Array(e.length),a=0,h=e.length;a<h;a++)s[a]=f(t,e[a],n,!0,r,a),t=s[a].newDocument;return s.newDocument=t,s}function d(t,e,n){var i=f(t,e);if(!1===i.test)throw new C("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return i.newDocument}function v(t,e,n,i){if("object"!=typeof t||null===t||Array.isArray(t))throw new C("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(!k[t.op])throw new C("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n);if("string"!=typeof t.path)throw new C("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new C('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if(("move"===t.op||"copy"===t.op)&&"string"!=typeof t.from)throw new C("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new C("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&u(t.value))throw new C("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n)if("add"==t.op){var r=t.path.split("/").length,o=i.split("/").length;if(r!==o+1&&r!==o)throw new C("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==i)throw new C("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if("move"===t.op||"copy"===t.op){var s=y([{op:"_get",path:t.from,value:void 0}],n);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new C("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}function y(t,e,n){try{if(!Array.isArray(t))throw new C("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)p(o(e),o(t),n||!0);else{n=n||v;for(var i=0;i<t.length;i++)n(t[i],i,e,void 0)}}catch(t){if(t instanceof C)return t;throw t}}function m(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n,i,r,o=Array.isArray(t),s=Array.isArray(e);if(o&&s){if((i=t.length)!=e.length)return!1;for(n=i;0!=n--;)if(!m(t[n],e[n]))return!1;return!0}if(o!=s)return!1;var a=Object.keys(t);if((i=a.length)!==Object.keys(e).length)return!1;for(n=i;0!=n--;)if(!e.hasOwnProperty(a[n]))return!1;for(n=i;0!=n--;)if(!m(t[r=a[n]],e[r]))return!1;return!0}return t!=t&&e!=e}function w(t,e){e.unobserve()}function g(t,e){var n,i=function(t){return j.get(t)}(t);if(i){var r=function(t,e){return t.observers.get(e)}(i,e);n=r&&r.observer}else i=new R(t),j.set(t,i);if(n)return n;if(n={},i.value=o(t),e){n.callback=e,n.next=null;var s=function(){b(n)},a=function(){clearTimeout(n.next),n.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return n.patches=[],n.object=t,n.unobserve=function(){b(n),clearTimeout(n.next),function(t,e){t.observers.delete(e.callback)}(i,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(e,new I(e,n)),n}function b(t,e){void 0===e&&(e=!1);var n=j.get(t.object);E(n.value,t.object,t.patches,"",e),t.patches.length&&p(n.value,t.patches);var i=t.patches;return i.length>0&&(t.patches=[],t.callback&&t.callback(i)),i}function E(t,e,n,s,h){if(e!==t){"function"==typeof e.toJSON&&(e=e.toJSON());for(var u=r(e),c=r(t),l=!1,f=c.length-1;f>=0;f--){var p=t[v=c[f]];if(!i(e,v)||void 0===e[v]&&void 0!==p&&!1===Array.isArray(e))Array.isArray(t)===Array.isArray(e)?(h&&n.push({op:"test",path:s+"/"+a(v),value:o(p)}),n.push({op:"remove",path:s+"/"+a(v)}),l=!0):(h&&n.push({op:"test",path:s,value:t}),n.push({op:"replace",path:s,value:e}));else{var d=e[v];"object"==typeof p&&null!=p&&"object"==typeof d&&null!=d?E(p,d,n,s+"/"+a(v),h):p!==d&&(h&&n.push({op:"test",path:s+"/"+a(v),value:o(p)}),n.push({op:"replace",path:s+"/"+a(v),value:o(d)}))}}if(l||u.length!=c.length)for(f=0;f<u.length;f++){var v;i(t,v=u[f])||void 0===e[v]||n.push({op:"add",path:s+"/"+a(v),value:o(e[v])})}}}function S(t,e,n){void 0===n&&(n=!1);var i=[];return E(t,e,i,"",n),i}n.r(e);var A={};n.r(A),n.d(A,"JsonPatchError",(function(){return C})),n.d(A,"deepClone",(function(){return P})),n.d(A,"getValueByPointer",(function(){return l})),n.d(A,"applyOperation",(function(){return f})),n.d(A,"applyPatch",(function(){return p})),n.d(A,"applyReducer",(function(){return d})),n.d(A,"validator",(function(){return v})),n.d(A,"validate",(function(){return y})),n.d(A,"_areEquals",(function(){return m}));var O={};n.r(O),n.d(O,"unobserve",(function(){return w})),n.d(O,"observe",(function(){return g})),n.d(O,"generate",(function(){return b})),n.d(O,"compare",(function(){return S}));var T=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),x=Object.prototype.hasOwnProperty,_=function(t){function e(e,n,i,r,o){var s=this.constructor,a=t.call(this,c(e,{name:n,index:i,operation:r,tree:o}))||this;return a.name=n,a.index=i,a.operation=r,a.tree=o,Object.setPrototypeOf(a,s.prototype),a.message=c(e,{name:n,index:i,operation:r,tree:o}),a}return T(e,t),e}(Error),C=_,P=o,k={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var i=t[e];return delete t[e],{newDocument:n,removed:i}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:function(t,e,n){var i=l(n,this.path);i&&(i=o(i));var r=f(n,{op:"remove",path:this.from}).removed;return f(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(t,e,n){var i=l(n,this.from);return f(n,{op:"add",path:this.path,value:o(i)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:m(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},N={add:function(t,e,n){return s(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){return{newDocument:n,removed:t.splice(e,1)[0]}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:k.move,copy:k.copy,test:k.test,_get:k._get},j=new WeakMap,R=function(t){this.observers=new Map,this.obj=t},I=function(t,e){this.callback=t,this.observer=e};n.d(e,"getValueByPointer",(function(){return l})),n.d(e,"applyOperation",(function(){return f})),n.d(e,"applyPatch",(function(){return p})),n.d(e,"applyReducer",(function(){return d})),n.d(e,"validator",(function(){return v})),n.d(e,"validate",(function(){return y})),n.d(e,"_areEquals",(function(){return m})),n.d(e,"unobserve",(function(){return w})),n.d(e,"observe",(function(){return g})),n.d(e,"generate",(function(){return b})),n.d(e,"compare",(function(){return S})),n.d(e,"JsonPatchError",(function(){return _})),n.d(e,"deepClone",(function(){return o})),n.d(e,"escapePathComponent",(function(){return a})),n.d(e,"unescapePathComponent",(function(){return h})),e.default=Object.assign({},A,O,{JsonPatchError:_,deepClone:o,escapePathComponent:a,unescapePathComponent:h})}]);